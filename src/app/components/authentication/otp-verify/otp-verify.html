<div class="otp-verify-container">
  <div class="bg-surface-50 dark:bg-surface-950 flex items-center justify-center min-h-screen min-w-screen overflow-hidden p-4">
    <div class="flex flex-col items-center justify-center w-full max-w-md">
      <div style="border-radius: 32px; padding: 0.2rem; background: linear-gradient(180deg, #000000 10%, rgba(0, 0, 0, 0) 30%)">
        <div class="w-full bg-surface-0 dark:bg-surface-900 py-12 px-8 sm:px-12" style="border-radius: 30px">
          
          <!-- Header Section -->
          <div class="text-center mb-8">
            <div class="text-surface-900 dark:text-surface-0 text-2xl font-bold mb-2">
              Verify yourself
            </div>
            <span class="text-muted-color text-sm">
              Please enter the 6-digit OTP received in your email.
            </span>
            <div *ngIf="email" class="mt-2">
              <span class="text-sm text-surface-600 dark:text-surface-400">
                Sent to: {{ email }}
              </span>
            </div>
          </div>

          <!-- Error Message -->
          <div *ngIf="errorMessage" class="mb-6">
            <p-message severity="error" [text]="errorMessage" styleClass="w-full"></p-message>
          </div>

          <!-- Success Message -->
          <div *ngIf="successMessage" class="mb-6">
            <p-message severity="success" [text]="successMessage" styleClass="w-full"></p-message>
          </div>

          <!-- OTP Input Form -->
          <form (ngSubmit)="verifyOtp()" class="space-y-8">
            
            <!-- OTP Input Fields -->
            <div class="otp-input-group">
              <div class="flex justify-center gap-3 mb-6">
                <div class="otp-input-wrapper">
                  <input
                    id="otp-1"
                    type="text"
                    maxlength="1"
                    (input)="onInput($event, 1)"
                    (keydown)="onKeyDown($event, 1)"
                    (paste)="onPaste($event)"
                    (focus)="onFocus($event)"
                    [disabled]="isLoading || isResending"
                    class="otp-input"
                    autocomplete="one-time-code"
                    placeholder="0"
                  />
                </div>
                <div class="otp-input-wrapper">
                  <input
                    id="otp-2"
                    type="text"
                    maxlength="1"
                    (input)="onInput($event, 2)"
                    (keydown)="onKeyDown($event, 2)"
                    (paste)="onPaste($event)"
                    (focus)="onFocus($event)"
                    [disabled]="isLoading || isResending"
                    class="otp-input"
                    autocomplete="one-time-code"
                    placeholder="0"
                  />
                </div>
                <div class="otp-input-wrapper">
                  <input
                    id="otp-3"
                    type="text"
                    maxlength="1"
                    (input)="onInput($event, 3)"
                    (keydown)="onKeyDown($event, 3)"
                    (paste)="onPaste($event)"
                    (focus)="onFocus($event)"
                    [disabled]="isLoading || isResending"
                    class="otp-input"
                    autocomplete="one-time-code"
                    placeholder="0"
                  />
                </div>
                <div class="otp-input-wrapper">
                  <input
                    id="otp-4"
                    type="text"
                    maxlength="1"
                    (input)="onInput($event, 4)"
                    (keydown)="onKeyDown($event, 4)"
                    (paste)="onPaste($event)"
                    (focus)="onFocus($event)"
                    [disabled]="isLoading || isResending"
                    class="otp-input"
                    autocomplete="one-time-code"
                    placeholder="0"
                  />
                </div>
                <div class="otp-input-wrapper">
                  <input
                    id="otp-5"
                    type="text"
                    maxlength="1"
                    (input)="onInput($event, 5)"
                    (keydown)="onKeyDown($event, 5)"
                    (paste)="onPaste($event)"
                    (focus)="onFocus($event)"
                    [disabled]="isLoading || isResending"
                    class="otp-input"
                    autocomplete="one-time-code"
                    placeholder="0"
                  />
                </div>
                <div class="otp-input-wrapper">
                  <input
                    id="otp-6"
                    type="text"
                    maxlength="1"
                    (input)="onInput($event, 6)"
                    (keydown)="onKeyDown($event, 6)"
                    (paste)="onPaste($event)"
                    (focus)="onFocus($event)"
                    [disabled]="isLoading || isResending"
                    class="otp-input"
                    autocomplete="one-time-code"
                    placeholder="0"
                  />
                </div>
              </div>
            </div>

            <!-- Verify Button -->
            <button 
              pButton 
              type="submit" 
              styleClass="w-full" 
              [disabled]="isLoading || isResending || getOtpValue().length !== 6"
              class="verify-button black-theme"
            >
              <span *ngIf="isLoading" class="flex items-center justify-center">
                <p-progressSpinner 
                  styleClass="w-4 h-4 mr-2" 
                  strokeWidth="4"
                  animationDuration=".5s"
                ></p-progressSpinner>
                Verifying...
              </span>
              <span *ngIf="!isLoading">Verify OTP</span>
            </button>

            <!-- Resend OTP Link -->
            <div class="text-center">
              <button 
                type="button" 
                (click)="resendOtp()"
                [disabled]="isLoading || isResending"
                class="resend-link text-black dark:text-white font-medium no-underline hover:underline bg-transparent border-none cursor-pointer flex items-center justify-center mx-auto"
              >
                <span *ngIf="isResending" class="flex items-center justify-center">
                  <p-progressSpinner 
                    styleClass="w-4 h-4 mr-2" 
                    strokeWidth="4"
                    animationDuration=".5s"
                  ></p-progressSpinner>
                  Resending...
                </span>
                <span *ngIf="!isResending">Resend OTP</span>
              </button>
            </div>

            <!-- Signup Link -->
            <div class="text-center mt-6 pt-6 border-t border-surface-200 dark:border-surface-700">
              <span class="text-muted-color text-sm">
                First time user? 
                <a routerLink="/signup" class="text-black font-medium no-underline hover:underline ml-1 dark:text-white">
                  Signup here
                </a>
              </span>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>